<!DOCTYPE html>
<html lang="ne">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>गृहपृष्ठ - सूर्य ज्योति माध्यमिक विद्यालय मेहेलकुना</title>
    <link rel="stylesheet" href="style.css"> <!-- Your main stylesheet -->
    <link href="https://fonts.googleapis.com/css2?family=Mukta:wght@400;500;600;700&family=Noto+Sans+Devanagari:wght@400;500;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
</head>
<body>
    <header class="site-header">
        <div class="container header-content-wrapper">
            <div class="logo-name-group">
                <img src="logo.png" alt="विद्यालयको लोगो" class="logo-img">
                <div class="school-details">
                    <h1>सूर्य ज्योति माध्यमिक विद्यालय मेहेलकुना, गुर्भाकोट-८, सुर्खेत</h1>
                    <p>ज्ञान, अनुशासन र प्रगति</p>
                </div>
            </div>
        </div>
    </header>
    <nav class="main-navigation">
        <div class="container nav-list-wrapper">
            <ul class="nav-menu">
                <li><a href="index.html" class="active">गृहपृष्ठ</a></li>
                <li><a href="about.html">हाम्रो बारेमा</a></li>
                <li><a href="notice.html">सूचना पाटी</a></li>
                <li><a href="results.html">नतिजा</a></li>
                <li><a href="teachers.html">शिक्षक/कर्मचारी</a></li>
                <li><a href="gallery.html">फोटो ग्यालेरी</a></li>
                <li><a href="contact.html">सम्पर्क</a></li>
            </ul>
        </div>
    </nav>

    <main class="container"> <!-- Main content wrapper -->
        <!-- Notice Ticker Section -->
        <section id="notice-ticker-section">
            <div class="notice-ticker-wrapper">
                <span class="material-icons">campaign</span>
                <div class="notice-ticker" id="notice-ticker-content">
                    <marquee behavior="scroll" direction="left" onmouseover="this.stop();" onmouseout="this.start();">
                        <!-- सूचनाहरू यहाँ JavaScript बाट लोड हुनेछन् -->
                        <span>सूचनाहरू लोड हुँदै...</span>
                    </marquee>
                </div>
            </div>
        </section>

        <!-- Welcome Section -->
        <section id="welcome">
            <h2>स्वागतम्!</h2>
            <p>सूर्य ज्योति माध्यमिक विद्यालय, मेहेलकुनाको आधिकारिक वेबसाइटमा तपाईंलाई हार्दिक स्वागत छ। हाम्रो विद्यालय गुणस्तरीय शिक्षा प्रदान गर्न र विद्यार्थीहरूको सर्वाङ्गीण विकासमा समर्पित छ। हामी नवीनतम शिक्षण पद्धतिहरू र प्रविधिहरूको प्रयोग गर्दै विद्यार्थीहरूलाई भविष्यका चुनौतीहरूको सामना गर्न सक्षम बनाउने प्रयास गर्दछौं।</p>
        </section>

        <!-- Slideshow Section -->
        <section class="school-photo-section-container">
            <div class="school-photo-section">
                <div class="photo-slideshow">
                    <img src="photos/1.jpg" alt="विद्यालयको गतिविधि १" class="slide active">
                    <img src="photos/5.jpg" alt="विद्यालयको गतिविधि ५" class="slide">
                    <img src="photos/8.jpg" alt="विद्यालयको गतिविधि ८" class="slide">
                    <img src="photos/7.jpg" alt="विद्यालयको गतिविधि ७" class="slide">
                    <img src="photos/3.jpg" alt="विद्यालयको गतिविधि ३" class="slide">
                    <img src="photos/10.jpg" alt="विद्यालयको गतिविधि १०" class="slide">
                </div>
            </div>
        </section>

        <!-- Quick Links Section - यहाँ परिवर्तन गरिएको छ -->
        <section id="quick-links">
            <h2>द्रुत लिङ्कहरू</h2>
            <ul>
                <li><a href="smcpta/smc.html">विद्यालय व्यवस्थापन समिति</a></li>
                <li><a href="smcpta/pta.html">शिक्षक अभिभावक संघ</a></li>
            </ul>
        </section>
    </main>

    <footer class="site-footer">
        <div class="container">
            <p>© <span id="current-year"></span> सूर्य ज्योति माध्यमिक विद्यालय, मेहेलकुना। सर्वाधिकार सुरक्षित।</p>
            <p>गुर्भाकोट-८, मेहेलकुना, सुर्खेत, नेपाल</p>
        </div>
    </footer>

     <script>
        // Current Year for Footer
        document.getElementById('current-year').textContent = new Date().getFullYear();

        // Slideshow JavaScript
        let currentSlide = 0;
        const slides = document.querySelectorAll('.photo-slideshow .slide');
        const totalSlides = slides.length;

        function showSlide(n) {
            if (totalSlides === 0) return;

            slides.forEach(slide => {
                slide.classList.remove('active');
                slide.style.opacity = 0; 
            });

            currentSlide = (n + totalSlides) % totalSlides;
            slides[currentSlide].classList.add('active');
            slides[currentSlide].style.opacity = 1;
        }

        if (totalSlides > 0) {
            showSlide(currentSlide); 
            setInterval(() => {
                showSlide(currentSlide + 1);
            }, 3000); 
        }

        // --- सूचना टिकरको लागि JavaScript ---
        async function loadAndDisplayNotices() {
            const noticeTickerMarquee = document.querySelector('#notice-ticker-content marquee');
            if (!noticeTickerMarquee) {
                console.error("त्रुटि: सूचना टिकरको लागि marquee तत्व भेटिएन।");
                return;
            }
            console.log("१. सूचना टिकर: `loadAndDisplayNotices` प्रकार्य सुरु भयो।");

            try {
                console.log("२. सूचना टिकर: `notice.html` फाइल fetch गर्ने प्रयास गर्दै...");
                const response = await fetch('./notice.html'); 
                console.log("३. सूचना टिकर: Fetch response प्राप्त भयो। Status:", response.status, response.statusText);

                if (!response.ok) {
                    console.error(`त्रुटि: 'notice.html' fetch गर्न असफल। Status: ${response.status} ${response.statusText}`);
                    throw new Error(`'notice.html' fetch गर्न असफल: ${response.statusText} (Status: ${response.status})`);
                }
                const htmlText = await response.text();
                console.log("४. सूचना टिकर: 'notice.html' को सामग्री सफलतापूर्वक fetch गरियो (पहिलो ३०० अक्षर):", htmlText.substring(0, 300));

                const parser = new DOMParser();
                const noticeDoc = parser.parseFromString(htmlText, 'text/html');
                console.log("५. सूचना टिकर: HTML सामग्री DOM object मा पार्स गरियो।");

                // ***** यहाँ selector परिवर्तन गरिएको छ *****
                const noticeItems = noticeDoc.querySelectorAll('#notice-board .notice-item'); 
                console.log(`६. सूचना टिकर: ${noticeItems.length} वटा सूचना आइटमहरू भेटिए।`);
                
                let tickerLinks = [];
                const latestNoticeItems = Array.from(noticeItems).slice(0, 5); 
                console.log(`७. सूचना टिकर: पछिल्ला ${latestNoticeItems.length} वटा सूचनाहरू प्रोसेस गरिँदै...`);

                latestNoticeItems.forEach((item, index) => {
                    const titleElement = item.querySelector('h3'); 
                    const noticeId = item.getAttribute('id'); 

                    if (titleElement && noticeId) {
                        let titleText = titleElement.textContent.trim();
                        tickerLinks.push(`<a href="notice.html#${noticeId}">${escapeHTML(titleText)}</a>`);
                        console.log(`   - सूचना ${index + 1}: शीर्षक='${titleText}', id='${noticeId}' टिकरमा थपियो।`);
                    } else {
                        console.warn(`   - चेतावनी: सूचना आइटम ${index + 1} मा शीर्षक वा id भेटिएन।`, item);
                    }
                });

                if (tickerLinks.length > 0) {
                    noticeTickerMarquee.innerHTML = tickerLinks.join(' | ');
                    console.log("८. सूचना टिकर: टिकर सफलतापूर्वक अपडेट गरियो।");
                } else {
                    noticeTickerMarquee.innerHTML = '<span>हाल कुनै नयाँ सूचना छैन।</span>';
                    console.log("८. सूचना टिकर: कुनै लिङ्क नभएकोले 'हाल कुनै नयाँ सूचना छैन' देखाइयो।");
                }

            } catch (error) {
                console.error('Catch Block - सूचना टिकर लोड गर्न असफल:', error);
                noticeTickerMarquee.innerHTML = '<span>सूचनाहरू लोड हुन सकेन। कन्सोल हेर्नुहोस्।</span>';
            }
        }

        function escapeHTML(str) {
            if (typeof str !== 'string') return '';
            const div = document.createElement('div');
            div.textContent = str;
            return div.innerHTML;
        }

        document.addEventListener('DOMContentLoaded', loadAndDisplayNotices);
    </script>
    <!--<script src="result-modal.js"></script>-->
</body>
</html>
